---
title: "30daysOS-第13天 定时器(2)"
date: 2021-04-03T10:30:00+08:00
tags: [学习笔记, 学习, 笔记]
draft: false
description: "30天自制操作系统"
source: "http://hrb.osask.jp/"
---
#操作系统 #30daysOS 


# 使用定时器


## 继续优化

- 合并所有定时器的消息队列, 注意, 从消息队列中取数据的时候, 也要进行相应的判断.![[Pasted image 20210403143347.png]]
- 键盘鼠标的消息队列与定时器合到一块
- 优化移位处理(即移动数组中的元素): 使用链表
- 插入链表有4种情况, 使用哨兵可以省略第1和第4中情况. ----- // 哨兵: 链表中默认存在的一个最大值(或者最小值), 永远在一端. 
	- ~~链表为空, 当前定时器插入到第一位~~,   -- // 因为有了哨兵, 链表不可能为空
	- 当前超时时间最小, 插入到第一位
	- 当前超时时间适中, 搜索适当的位置并插入
	- ~~当前超时时间最大, 插入到最后移位~~  -- // 因为哨兵的超时间最大, 永远在最后